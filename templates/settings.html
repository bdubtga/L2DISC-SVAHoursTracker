<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SVA - Settings</title>
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
  </head>
  <body class="bg-gray-100 p-8">
    <!-- header -->
      <h1 class="text-2xl font-bold text-gray-800 mb-6">Settings</h1>
    
    {% if error %}
    <div class="mb-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded">
      {{ error }}
    </div>
    {% endif %}
    
    {% if message %}
    <div class="mb-4 p-4 bg-green-100 border border-green-400 text-green-700 rounded">
      {{ message }}
    </div>
    {% endif %}

    <div class="grid grid-cols-2 gap-8">
      <!-- user settings-->
      <div class="bg-white shadow-md p-6 rounded-lg">
        <h2 class="text-xl font-semibold mb-4">User Settings</h2>
        <form method="POST" class="space-y-4">
          <div>
            <label class="block text-sm font-medium text-gray-700">Username</label>
            <input
              type="text"
              name="username"
              class="mt-1 block w-full border border-gray-300 rounded-md p-2"
              value="{{ user[1] if user else '' }}"
              required
            />
          </div>
          <button
            type="submit"
            name="update_user"
            class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition-colors"
          >
            Save Changes
          </button>
        </form>
        
        <!-- change pass -->
        <div class="mt-8 pt-6 border-t border-gray-200">
          <h3 class="text-lg font-semibold mb-4">Change Password</h3>
          <form method="POST" class="space-y-4">
            <div>
              <label class="block text-sm font-medium text-gray-700">Current Password</label>
              <input
                type="password"
                name="current_password"
                class="mt-1 block w-full border border-gray-300 rounded-md p-2"
                required
              />
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700">New Password</label>
              <input
                type="password"
                name="new_password"
                class="mt-1 block w-full border border-gray-300 rounded-md p-2"
                required
              />
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700">Confirm New Password</label>
              <input
                type="password"
                name="confirm_password"
                class="mt-1 block w-full border border-gray-300 rounded-md p-2"
                required
              />
            </div>
            <button
              type="submit"
              name="change_password"
              class="bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 transition-colors"
            >
              Change Password
            </button>
          </form>
        </div>
      </div>
      
      <!-- school -->
      <div class="bg-white shadow-md p-6 rounded-lg">
        <h2 class="text-xl font-semibold mb-4">School Selection</h2>
        <div class="grid grid-cols-2 gap-4">
          <div>
            <!-- select school -->
            <form method="POST">
              <label class="block text-sm font-medium text-gray-700">Select School</label>
              <select
                name="school_id"
                class="mt-1 block w-full border border-gray-300 rounded-md p-2"
              >
                <option value="">-- Select a School --</option>
                {% for school in schools %}
                <option 
                  value="{{ school[0] }}" 
                  {% if current_school and school[0] == current_school[0] %}selected{% endif %}
                  data-name="{{ school[1] }}"
                  data-address="{{ school[2] }}"
                  data-contact="{{ school[3] }}"
                  data-email="{{ school[4] }}"
                  data-phone="{{ school[5] }}"
                >
                  {{ school[1] }}
                </option>
                {% endfor %}
              </select>
              <button
                type="submit"
                name="update_school"
                class="mt-4 bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 w-full transition-colors"
              >
                Update School
              </button>
            </form>
          </div>
          
          <div class="flex flex-col gap-4 text-right">
            <!-- school details -->
            <div class="flex flex-col" id="school-details">
              {% if current_school %}
              <h3 class="text-lg font-semibold">{{ current_school[1] }}</h3>
              <p class="text-sm text-gray-600">{{ current_school[2] }}</p>
              {% else %}
              <h3 class="text-lg font-semibold text-gray-400">No School Selected</h3>
              <p class="text-sm text-gray-600">Please select a school to view details</p>
              {% endif %}
            </div>
            
            <!-- contact person -->
            <div class="flex flex-col" id="contact-details">
              {% if current_school %}
              <h4 class="text-lg font-semibold mb-2">Contact Person</h4>
              <p class="text-sm text-gray-600">{{ current_school[3] }}</p>
              <p class="text-sm text-gray-600">{{ current_school[4] }}</p>
              <p class="text-sm text-gray-600">{{ current_school[5] }}</p>
              {% else %}
              <h4 class="text-lg font-semibold mb-2 text-gray-400">Contact Person</h4>
              <p class="text-sm text-gray-600">No contact information available</p>
              {% endif %}
            </div>
          </div>
        </div>
      </div>
    </div>


  </body>
</html>
